(function(e){function a(e){var t=0,n,r;e+="";if(e.length===0)return t;for(n=0;n<e.length;n++)r=e.charCodeAt(n),t=(t<<5)-t+r,t&=t;return t}function f(e,t,n){this.container=e,this.name=t,this.map=n,this.markers=[],this.visible=!0}function l(e,t){this.marker=e,this.selected=!1,this.listeners={},this.element=t.element,this.map=t.map,this.group=t.group}function c(){if(n)return;n=nokia.maps}function h(e){return typeof e=="function"}var t="ungrouped",n,r,i,s,o={marker:{text:"",textColor:"#333333",fill:"#ff6347",stroke:"#333333",shape:"balloon",icon:undefined,group:t}},u={};s=f.prototype,s.addMarker=function(e){this.markers.push(e)},s.hide=function(){this.visible&&(this.map.objects.remove(this.container),this.visible=!1)},s.show=function(){this.visible||(this.map.objects.add(this.container),this.visible=!0)},f.getGroup=function(e){return e=e||t,u[e]},i=l.prototype,i.on=function(t,n){var r,i;this.listeners[t]||(this.listeners[t]={}),r=function(t){var r=e.Event(t.type,{originalEvent:t,geo:{latitude:t.target.coordinate.latitude,longitude:t.target.coordinate.longitude},target:t.target});n.call(this,r)},i=e.proxy(r,this),this.listeners[t][""+a(n)]=i,this.marker.addListener(t,i)},i.off=function(t,n){var r=this.listeners;if(!n){e.each(r[t],function(e,n){this.marker.removeListener(t,n)});return}this.marker.removeListener(t,r[t][""+a(n)])},i.remove=function(){u[this.group.name].container.objects.remove(this.marker)},i.add=function(){u[this.group.name].container.objects.add(this.marker)},r=function(t,r,i){var s;c(),e.isFunction(r)&&(i=r,r={}),r=e.extend({},o.marker,r),r.textPen=r.textPen||{strokeColor:r.textColor},r.pen=r.pen||{strokeColor:r.stroke},r.brush=r.brush||{color:r.fill},u[r.group]||(u[r.group]=new f(new n.map.Container,r.group,this.map),this.map.objects.add(u[r.group].container),r.group=u[r.group]),r.icon?s=new l(new n.map.Marker(t,r),r):s=new l(new n.map.StandardMarker(t,r),r),s.add(),i.call(this.element,s,s.group)},e.jHERE.extend("marker",r)})(jQuery);